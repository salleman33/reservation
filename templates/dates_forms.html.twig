{#
 # Inspir√© de templates/pages/tools/find_available_reservation.html.twig
 #}

{% set params = {
    target: 'PluginReservationMenu'|itemtype_search_path,
    canedit: true,
    candel: false,
    addbuttons: {
        submit: {
            text: _x('button', 'Search'),
            btn_class: 'btn-primary'
        },
        cancel: {
            type: 'button',
            text: _x('button', 'Cancel'),
            btn_class: 'btn-outline-secondary',
            onclick: "$('#viewresasearch').toggleClass('d-none');$('#makesearch').toggleClass('d-none')"
        }
    }
} %}

{% import 'components/form/fields_macros.html.twig' as fields %}
{% import 'components/form/basic_inputs_macros.html.twig' as inputs %}

<div id="makesearch" class="text-center mb-3">
    <a class="btn btn-secondary" href="{{ path('front/reservation.php?reservationitems_id=0') }}">
        <i class="{{ 'Planning'|itemtype_icon }} me-2"></i>{{ __("View calendar for all items") }}
    </a>    
</div>
<div id="viewresasearch" class="text-center">
    <div class="asset mb-3">
        <form action="{{ 'PluginReservationMenu'|itemtype_search_path }}" method="post">
            <input type="hidden" name="_glpi_csrf_token" value="{{ csrf_token() }}"/>
            <div class="d-flex flex-wrap">
                <div class="col-12 col-xxl-12 flex-column">
                    {{ inputs.submit('previousday', _x('button', 'Previous')) }}
                    {{ inputs.submit('nextday', _x('button', 'Next')) }}

                    <div class="row flex-row">
                        {{ fields.datetimeField('date_begin', form_dates['begin'], __('Start date'), {
                            maybeempty: false
                        }) }}                        
    
                        {{ fields.datetimeField('date_end', form_dates['end'], __('End date'), {
                            maybeempty: false
                        }) }}

                        {{ fields.dropdownArrayField('reservation_types', _post['reservation_types'], reservation_types, __('Item type'), {
                            display_emptychoice: true
                        }) }}

                        {{ fields.dropdownField('Location', 'locations_id', default_location, __('Item location'), {
                            entity: session('glpiactiveentities')
                        }) }}
                    </div>
                    <div class="d-flex flex-row-reverse">
                        {{ inputs.submit('submit', _x('button', 'Search')) }}
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>